"use strict";(self.webpackChunkdocs_surrealdb_com=self.webpackChunkdocs_surrealdb_com||[]).push([[5139],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),u=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},d=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),p=u(a),h=n,m=p["".concat(s,".").concat(h)]||p[h]||c[h]||o;return a?r.createElement(m,l(l({ref:t},d),{},{components:a})):r.createElement(m,l({ref:t},d))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,l=new Array(o);l[0]=h;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[p]="string"==typeof e?e:n,l[1]=i;for(var u=2;u<o;u++)l[u]=a[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,a)}h.displayName="MDXCreateElement"},1191:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var r=a(7462),n=(a(7294),a(3905));const o={sidebar_position:1},l=void 0,i={unversionedId:"Installation/Upgrading/Upgrading from v1.0.0-beta.9 to v1.0.0-beta.10",id:"Installation/Upgrading/Upgrading from v1.0.0-beta.9 to v1.0.0-beta.10",title:"Upgrading from v1.0.0-beta.9 to v1.0.0-beta.10",description:"Upgrading from v1.0.0-beta.9 to v1.0.0-beta.10",source:"@site/docs/Installation/Upgrading/Upgrading from v1.0.0-beta.9 to v1.0.0-beta.10.mdx",sourceDirName:"Installation/Upgrading",slug:"/Installation/Upgrading/Upgrading from v1.0.0-beta.9 to v1.0.0-beta.10",permalink:"/docs/Installation/Upgrading/Upgrading from v1.0.0-beta.9 to v1.0.0-beta.10",draft:!1,editUrl:"https://github.com/surrealdb/docs.surrealdb.com/edit/main/docs/Installation/Upgrading/Upgrading from v1.0.0-beta.9 to v1.0.0-beta.10.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Run a multi node server",permalink:"/docs/Installation/Run a multi node server"},next:{title:"SurrealQL",permalink:"/docs/category/surrealql"}},s={},u=[{value:"Upgrading from v1.0.0-beta.9 to v1.0.0-beta.10",id:"upgrading-from-v100-beta9-to-v100-beta10",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Internal data changes",id:"internal-data-changes",level:2},{value:"1. Start your old SurrealDB instance",id:"1-start-your-old-surrealdb-instance",level:3},{value:"2. Export your data",id:"2-export-your-data",level:3},{value:"3. Stop the SurrealDB instance",id:"3-stop-the-surrealdb-instance",level:3},{value:"4. Install SurrealDB v1.0.0-beta.10",id:"4-install-surrealdb-v100-beta10",level:3},{value:"5. Start the v1.0.0-beta.10 SurrealDB instance",id:"5-start-the-v100-beta10-surrealdb-instance",level:3},{value:"6. Import your data",id:"6-import-your-data",level:3},{value:"Behaviour changes",id:"behaviour-changes",level:2},{value:"Revamped root users",id:"revamped-root-users",level:2},{value:"Stricter typing",id:"stricter-typing",level:2},{value:"Learn more",id:"learn-more",level:2}],d={toc:u},p="wrapper";function c(e){let{components:t,...a}=e;return(0,n.kt)(p,(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"upgrading-from-v100-beta9-to-v100-beta10"},"Upgrading from v1.0.0-beta.9 to v1.0.0-beta.10"),(0,n.kt)("p",null,"Because of a change in the underlying way that SurrealDB stores data in this update, there are extra steps required to migrate to ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.0.0-beta.10"),"."),(0,n.kt)("h2",{id:"introduction"},"Introduction"),(0,n.kt)("p",null,"Our latest beta.10 update introduces a set of internal data changes, which can cause panics and other types of unexpected behaviour. Besides that, we also introduced a set of behavioural changes which we will introduce in this upgrade guide."),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"internal-data-changes"},"Internal data changes"),(0,n.kt)("p",null,"Because of the introduced internal data changes, we need to export our database(s) with beta-9, then import them back after we have upgraded to beta-10."),(0,n.kt)("h3",{id:"1-start-your-old-surrealdb-instance"},"1. Start your old SurrealDB instance"),(0,n.kt)("p",null,"You can start the instance just like you normally would."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"surreal start -u root -p root myolddataset.db\n")),(0,n.kt)("h3",{id:"2-export-your-data"},"2. Export your data"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"/docs/CLI%20tool/export_command"},"Please follow the export docs to run the export"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"surreal export --conn http://localhost:8000 --ns ns --db db --user root --pass root mydata.surql\n")),(0,n.kt)("h3",{id:"3-stop-the-surrealdb-instance"},"3. Stop the SurrealDB instance"),(0,n.kt)("p",null,"Stop the ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.0.0-beta.9")," database server, before continuing on to the next step."),(0,n.kt)("h3",{id:"4-install-surrealdb-v100-beta10"},"4. Install SurrealDB v1.0.0-beta.10"),(0,n.kt)("p",null,"Install v1.0.0-beta.10 database server, using the official docs before continuing on to the next step."),(0,n.kt)("h3",{id:"5-start-the-v100-beta10-surrealdb-instance"},"5. Start the v1.0.0-beta.10 SurrealDB instance"),(0,n.kt)("p",null,"Start the new ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.0.0-beta.10")," database server like you normally start SurrealDB, before importing your data."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"surreal start -u root -p root mynewdataset.db\n")),(0,n.kt)("h3",{id:"6-import-your-data"},"6. Import your data"),(0,n.kt)("p",null,"Please follow the import docs to run the import. Make sure to install ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.0.0-beta.10")," on your systems first."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"surreal import --conn http://localhost:8000 --ns ns --db db --user root --pass root mydata.surql\n")),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"behaviour-changes"},"Behaviour changes"),(0,n.kt)("p",null,"We have introduces numerous improvements, bug fixes and other type of changes in ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.0.0-beta.10"),". We will go over the most important items here, but for a full list of changes, please refer to our ",(0,n.kt)("a",{parentName:"p",href:"https://surrealdb.com/releases"},"release page for v1.0.0-beta.10"),"."),(0,n.kt)("p",null,"Capabilities\nWe have introduced capabilities in ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.0.0-beta.10"),". They allow you to allow or deny certain aspects of SurrealDB."),(0,n.kt)("p",null,"In our effort to deliver a security-first and water-tight database, all capabilities are disabled by default. This means that by default, you are not able to use any methods, embedded scripting functions, make outbound network calls, or access the database anonymously."),(0,n.kt)("p",null,"You can easily enable all these capabilties again with the ",(0,n.kt)("inlineCode",{parentName:"p"},"--allow-all")," flag, or choose which capabilities to enable yourself.\nThis is further documented in the ",(0,n.kt)("a",{parentName:"p",href:"/docs/security/capabilities"},"Capabilities")," documentation."),(0,n.kt)("h2",{id:"revamped-root-users"},"Revamped root users"),(0,n.kt)("p",null,"It is now possible to define multiple root users in SurrealDB. This change did require some changes in the way that you start your database however."),(0,n.kt)("p",null,"With this change, you will now only initially have to provide the ",(0,n.kt)("inlineCode",{parentName:"p"},"--user")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"--pass")," flags to create the initial root user, but once the first root user exists, they will no longer by utilized."),(0,n.kt)("p",null,"For more information, check out the ",(0,n.kt)("a",{parentName:"p",href:"/docs/security/authentication"},"Authentication guide"),", and the ",(0,n.kt)("a",{parentName:"p",href:"/docs/CLI%20tool/start_command"},(0,n.kt)("inlineCode",{parentName:"a"},"surreal start"))," and ",(0,n.kt)("a",{parentName:"p",href:"/docs/surrealql/statements/define/user"},"DEFINE USER")," documentation. "),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Command"',title:'"Command"'},'# When you initially start the database, you can create the first root user.\nsurreal start --auth --user root --pass root file:database.db\n\n# In the future, you don\'t need to specify the --user and --pass flags anymore\nsurreal start --auth file:database.db\n# Afterwards, you are able to create multiple root users.\nDEFINE USER tobie ON ROOT PASSWORD "SecurePassword!" ROLES OWNER;\nDEFINE USER jaime ON ROOT PASSWORD "SecurePassword!" ROLES EDITOR;\nDEFINE USER john  ON ROOT PASSWORD "SecurePassword!" ROLES VIEWER;\n')),(0,n.kt)("h2",{id:"stricter-typing"},"Stricter typing"),(0,n.kt)("p",null,"Previously, when you defined a field of a certain type, you manually had to ",(0,n.kt)("inlineCode",{parentName:"p"},"ASSERT")," that the value stored in that field, was not ",(0,n.kt)("inlineCode",{parentName:"p"},"NONE")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"NULL"),"."),(0,n.kt)("p",null,"We majorly improved the typing safety and strictness in ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.0.0-beta.10")," which allows you to overcome this issue."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# This field is required, as indicated by it's type.\nDEFINE FIELD age ON person TYPE number;\n\n# This field can now optionally store the age.\n# This means that the value can be either a number or NONE.\nDEFINE FIELD age ON person TYPE option<number>;\n\n# Notice how the previous example does not allow for NULL.\n# This is because NULL is consider to be a value, but the option type allows either an empty field (NONE), or the passed type.\n# If you want to allow NULL, we also introduced union types in v1.0.0-beta.10!\nDEFINE FIELD age ON person TYPE number | null;          -- number and NULL\nDEFINE FIELD age ON person TYPE option<number | null>;  -- number, NULL and NONE\n")),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"learn-more"},"Learn more"),(0,n.kt)("p",null,"These are some highlights of behavioural changes. For a complete list, please refer to our ",(0,n.kt)("a",{parentName:"p",href:"https://surrealdb.com/releases"},"release page")," for ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.0.0-beta.10"),"."))}c.isMDXComponent=!0}}]);